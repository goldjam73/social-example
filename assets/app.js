angular.module("app",["ngRoute"]),angular.module("app").controller("ApplicationCtrl",["$scope",function(t){t.$on("login",function(o,n){t.currentUser=n}),t.logout=function(){}}]),angular.module("app").controller("LoginCtrl",["$scope","$location","UserSvc",function(t,o,n){t.login=function(e,s){n.login(e,s).then(function(n){t.$emit("login",n.data),o.path("/")})}}]),function(){"use strict";function t(){var t=this;t.addPost=function(){null!==t.postBody&&t.onUpdate({value:t.postBody})}}angular.module("app").component("postInput",{controller:t,templateUrl:"postinput.html",bindings:{postBody:"<",onUpdate:"&"}})}(),function(){"use strict";angular.module("app").component("postItem",{templateUrl:"postitem.html",bindings:{post:"<"}})}(),function(){"use strict";function t(t,o){var n=this;n.postBody=null,n.addPost=function(t){o.create({body:t}).then(function(){n.postBody=null})},o.fetch().then(function(t){n.posts=t.data})}t.$inject=["$scope","PostsSvc"],angular.module("app").component("posts",{controller:t,templateUrl:"posts.html"})}(),angular.module("app").service("PostsSvc",["$http",function(t){this.fetch=function(){return t.get("/api/posts")},this.create=function(o){return t.post("/api/posts",o)}}]),angular.module("app").config(["$routeProvider",function(t){t.when("/",{template:"<posts></posts>"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"})}]),angular.module("app").service("UserSvc",["$http",function(t){var o=this;o.getUser=function(){return t.get("/api/users")},o.login=function(n,e){return t.post("/api/sessions",{username:n,password:e}).then(function(n){return o.token=n.data,t.defaults.headers.common["X-Auth"]=n.data,o.getUser()})}}]),angular.module("app").run(["$rootScope","$timeout",function(t,o){function n(){return"https:"===window.location.host?"wss://"+window.location.host:"ws://"+window.location.host}!function e(){var s=new WebSocket(n());s.onclose=function(){console.log("WebSocket closed. Reconnecting..."),o(e,1e4)},s.onmessage=function(o){var n=JSON.parse(o.data);t.$broadcast("ws:"+n.topic,n.data)}}()}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9uZy9hcHAuanMiLCIvbmcvYXBwLmpzIiwiL25nL2FwcC5qcyIsIi9uZy9hcHAuanMiLCIvbmcvYXBwLmpzIiwiL25nL2FwcC5qcyIsIi9uZy9hcHAuanMiLCIvbmcvYXBwLmpzIiwiL25nL2FwcC5qcyIsIi9uZy9hcHAuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkb24iLCJfIiwidXNlciIsImN1cnJlbnRVc2VyIiwibG9nb3V0IiwiJGxvY2F0aW9uIiwiVXNlclN2YyIsImxvZ2luIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsInRoZW4iLCJyZXNwb25zZSIsIiRlbWl0IiwiZGF0YSIsInBhdGgiLCJQb3N0SW5wdXRDb250cm9sbGVyIiwidm0iLCJ0aGlzIiwiYWRkUG9zdCIsInBvc3RCb2R5Iiwib25VcGRhdGUiLCJ2YWx1ZSIsImNvbXBvbmVudCIsInRlbXBsYXRlVXJsIiwiYmluZGluZ3MiLCJwb3N0IiwiUG9zdHNDb250cm9sbGVyIiwiUG9zdHNTdmMiLCJjcmVhdGUiLCJib2R5IiwiZmV0Y2giLCJwb3N0cyIsInNlcnZpY2UiLCIkaHR0cCIsImdldCIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlIiwic3ZjIiwiZ2V0VXNlciIsInZhbCIsInRva2VuIiwiZGVmYXVsdHMiLCJoZWFkZXJzIiwiY29tbW9uIiwicnVuIiwiJHJvb3RTY29wZSIsIiR0aW1lb3V0Iiwid2ViU29ja2V0SG9zdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdCIsImNvbm5lY3QiLCJjb25uZWN0aW9uIiwiV2ViU29ja2V0Iiwib25jbG9zZSIsImNvbnNvbGUiLCJsb2ciLCJvbm1lc3NhZ2UiLCJlIiwicGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsIiRicm9hZGNhc3QiLCJ0b3BpYyJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQUFDLE9BQUEsT0FDQSxZQ0RBRCxRQUFBQyxPQUFBLE9BQ0FDLFdBQUEsbUJBQUEsU0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxJQUFBLFFBQUEsU0FBQUMsRUFBQUMsR0FDQUgsRUFBQUksWUFBQUQsSUFFQUgsRUFBQUssT0FBQSxnQkNMQVIsUUFBQUMsT0FBQSxPQUNBQyxXQUFBLGFBQUEsU0FBQSxZQUFBLFVBQUEsU0FBQUMsRUFBQU0sRUFBQUMsR0FDQVAsRUFBQVEsTUFBQSxTQUFBQyxFQUFBQyxHQUNBSCxFQUFBQyxNQUFBQyxFQUFBQyxHQUNBQyxLQUFBLFNBQUFDLEdBQ0FaLEVBQUFhLE1BQUEsUUFBQUQsRUFBQUUsTUFDQVIsRUFBQVMsS0FBQSxXQ05BLFdBQ0EsWUFFQSxTQUFBQyxLQUNBLEdBQUFDLEdBQUFDLElBQ0FELEdBQUFFLFFBQUEsV0FDQSxPQUFBRixFQUFBRyxVQUNBSCxFQUFBSSxVQUFBQyxNQUFBTCxFQUFBRyxZQUtBdkIsUUFBQUMsT0FBQSxPQUNBeUIsVUFBQSxhQUNBeEIsV0FBQWlCLEVBQ0FRLFlBQUEsaUJBQ0FDLFVBQ0FMLFNBQUEsSUFDQUMsU0FBQSxVQ2xCQSxXQUNBLFlBRUF4QixTQUFBQyxPQUFBLE9BQ0F5QixVQUFBLFlBQ0FDLFlBQUEsZ0JBQ0FDLFVBQ0FDLEtBQUEsVUNQQSxXQUNBLFlBRUEsU0FBQUMsR0FBQTNCLEVBQUE0QixHQUNBLEdBQUFYLEdBQUFDLElBQ0FELEdBQUFHLFNBQUEsS0FDQUgsRUFBQUUsUUFBQSxTQUFBRyxHQUNBTSxFQUFBQyxRQUNBQyxLQUFBUixJQUNBWCxLQUFBLFdBQ0FNLEVBQUFHLFNBQUEsUUFVQVEsRUFBQUcsUUFBQXBCLEtBQUEsU0FBQUMsR0FDQUssRUFBQWUsTUFBQXBCLEVBQUFFLHVDQUlBakIsUUFBQUMsT0FBQSxPQUNBeUIsVUFBQSxTQUNBeEIsV0FBQTRCLEVBQ0FILFlBQUEsa0JDNUJBM0IsUUFBQUMsT0FBQSxPQUNBbUMsUUFBQSxvQkFDQSxTQUFBQyxHQUNBaEIsS0FBQWEsTUFBQSxXQUNBLE1BQUFHLEdBQUFDLElBQUEsZUFFQWpCLEtBQUFXLE9BQUEsU0FBQUgsR0FDQSxNQUFBUSxHQUFBUixLQUFBLGFBQUFBLE9DUEE3QixRQUFBQyxPQUFBLE9BQ0FzQyxRQUFBLGlCQUFBLFNBQUFDLEdBQ0FBLEVBQ0FDLEtBQUEsS0FDQUMsU0FBQSxvQkFFQUQsS0FBQSxhQUNBdkMsV0FBQSxlQUNBeUIsWUFBQSxrQkFFQWMsS0FBQSxVQUNBdkMsV0FBQSxZQUNBeUIsWUFBQSxrQkNaQTNCLFFBQUFDLE9BQUEsT0FDQW1DLFFBQUEsV0FBQSxRQUFBLFNBQUFDLEdBQ0EsR0FBQU0sR0FBQXRCLElBQ0FzQixHQUFBQyxRQUFBLFdBQ0EsTUFBQVAsR0FBQUMsSUFBQSxlQUVBSyxFQUFBaEMsTUFBQSxTQUFBQyxFQUFBQyxHQUNBLE1BQUF3QixHQUFBUixLQUFBLGlCQUNBakIsU0FBQUEsRUFDQUMsU0FBQUEsSUFDQUMsS0FBQSxTQUFBK0IsR0FHQSxNQUZBRixHQUFBRyxNQUFBRCxFQUFBNUIsS0FDQW9CLEVBQUFVLFNBQUFDLFFBQUFDLE9BQUEsVUFBQUosRUFBQTVCLEtBQ0EwQixFQUFBQyxnQkNiQTVDLFFBQUFDLE9BQUEsT0FDQWlELEtBQUEsYUFBQSxXQUFBLFNBQUFDLEVBQUFDLEdBQ0EsUUFBQUMsS0FDQSxNQUFBLFdBQUFDLE9BQUFDLFNBQUFDLEtBQ0EsU0FBQUYsT0FBQUMsU0FBQUMsS0FFQSxRQUFBRixPQUFBQyxTQUFBQyxNQUdBLFFBQUFDLEtBQ0EsR0FBQUMsR0FBQSxHQUFBQyxXQUFBTixJQUNBSyxHQUFBRSxRQUFBLFdBQ0FDLFFBQUFDLElBQUEscUNBQ0FWLEVBQUFLLEVBQUEsTUFFQUMsRUFBQUssVUFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUFDLEtBQUFDLE1BQUFILEVBQUEvQyxLQUNBa0MsR0FBQWlCLFdBQUEsTUFBQUgsRUFBQUksTUFBQUosRUFBQWhEIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXHJcblx0J25nUm91dGUnXHJcbl0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oJHNjb3BlKXtcclxuXHQkc2NvcGUuJG9uKCdsb2dpbicsIGZ1bmN0aW9uKF8sIHVzZXIpe1xyXG5cdFx0JHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuXHR9KTtcclxuXHQkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKXtcclxuXHRcdC8vXHJcblx0fTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0LmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwgJGxvY2F0aW9uLCBVc2VyU3ZjKSB7XHJcblx0XHQkc2NvcGUubG9naW4gPSBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcclxuXHRcdFx0VXNlclN2Yy5sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXHJcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuXHRcdFx0XHRcdCRzY29wZS4kZW1pdCgnbG9naW4nLCByZXNwb25zZS5kYXRhKTtcclxuXHRcdFx0XHRcdCRsb2NhdGlvbi5wYXRoKCcvJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9O1xyXG5cdH0pOyIsIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGZ1bmN0aW9uIFBvc3RJbnB1dENvbnRyb2xsZXIoKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0uYWRkUG9zdCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAodm0ucG9zdEJvZHkgIT09IG51bGwpIHtcclxuXHRcdFx0XHR2bS5vblVwZGF0ZSh7dmFsdWU6IHZtLnBvc3RCb2R5fSk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHRcdC5jb21wb25lbnQoJ3Bvc3RJbnB1dCcsIHtcclxuXHRcdFx0Y29udHJvbGxlcjogUG9zdElucHV0Q29udHJvbGxlcixcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwb3N0aW5wdXQuaHRtbCcsXHJcblx0XHRcdGJpbmRpbmdzOiB7XHJcblx0XHRcdFx0cG9zdEJvZHk6ICc8JyxcclxuXHRcdFx0XHRvblVwZGF0ZTogJyYnXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdFx0LmNvbXBvbmVudCgncG9zdEl0ZW0nLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiAncG9zdGl0ZW0uaHRtbCcsXHJcblx0XHRcdGJpbmRpbmdzOiB7XHJcblx0XHRcdFx0cG9zdDogJzwnXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHQndXNlIHN0cmljdCc7XHJcblxyXG5cdGZ1bmN0aW9uIFBvc3RzQ29udHJvbGxlcigkc2NvcGUsIFBvc3RzU3ZjKSB7XHJcblx0XHR2YXIgdm0gPSB0aGlzO1xyXG5cdFx0dm0ucG9zdEJvZHkgPSBudWxsO1xyXG5cdFx0dm0uYWRkUG9zdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcblx0XHRcdFBvc3RzU3ZjLmNyZWF0ZSh7XHJcblx0XHRcdFx0Ym9keTogdmFsdWVcclxuXHRcdFx0fSkudGhlbihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2bS5wb3N0Qm9keSA9IG51bGw7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvKnZtLiRvbignd3M6bmV3X3Bvc3QnLCBmdW5jdGlvbihfLCBwb3N0KSB7XHJcblx0XHRcdHZtLiRhcHBseShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2bS5wb3N0cy51bnNoaWZ0KHBvc3QpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pOyovXHJcblxyXG5cdFx0UG9zdHNTdmMuZmV0Y2goKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcblx0XHRcdHZtLnBvc3RzID0gcmVzcG9uc2UuZGF0YTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0YW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcblx0XHQuY29tcG9uZW50KCdwb3N0cycsIHtcclxuXHRcdFx0Y29udHJvbGxlcjogUG9zdHNDb250cm9sbGVyLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3Bvc3RzLmh0bWwnXHJcblx0XHR9KTtcclxufSkoKTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHQuc2VydmljZSgnUG9zdHNTdmMnLFxyXG5cdFx0ZnVuY3Rpb24oJGh0dHApIHtcclxuXHRcdFx0dGhpcy5mZXRjaCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKTtcclxuXHRcdFx0fTtcclxuXHRcdFx0dGhpcy5jcmVhdGUgPSBmdW5jdGlvbihwb3N0KSB7XHJcblx0XHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KTtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHQpOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpIHtcclxuXHRcdCRyb3V0ZVByb3ZpZGVyXHJcblx0XHRcdC53aGVuKCcvJywge1xyXG5cdFx0XHRcdHRlbXBsYXRlOiAnPHBvc3RzPjwvcG9zdHM+J1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQud2hlbignL3JlZ2lzdGVyJywge1xyXG5cdFx0XHRcdGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLFxyXG5cdFx0XHRcdHRlbXBsYXRlVXJsOiAncmVnaXN0ZXIuaHRtbCdcclxuXHRcdFx0fSlcclxuXHRcdFx0LndoZW4oJy9sb2dpbicsIHtcclxuXHRcdFx0XHRjb250cm9sbGVyOiAnTG9naW5DdHJsJyxcclxuXHRcdFx0XHR0ZW1wbGF0ZVVybDogJ2xvZ2luLmh0bWwnXHJcblx0XHRcdH0pO1xyXG5cdH0pOyIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKVxyXG5cdC5zZXJ2aWNlKCdVc2VyU3ZjJywgZnVuY3Rpb24oJGh0dHApIHtcclxuXHRcdHZhciBzdmMgPSB0aGlzO1xyXG5cdFx0c3ZjLmdldFVzZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS91c2VycycpO1xyXG5cdFx0fTtcclxuXHRcdHN2Yy5sb2dpbiA9IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCkge1xyXG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zZXNzaW9ucycsIHtcclxuXHRcdFx0XHR1c2VybmFtZTogdXNlcm5hbWUsXHJcblx0XHRcdFx0cGFzc3dvcmQ6IHBhc3N3b3JkXHJcblx0XHRcdH0pLnRoZW4oZnVuY3Rpb24odmFsKSB7XHJcblx0XHRcdFx0c3ZjLnRva2VuID0gdmFsLmRhdGE7XHJcblx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gdmFsLmRhdGE7XHJcblx0XHRcdFx0cmV0dXJuIHN2Yy5nZXRVc2VyKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHR9KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuXHQucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XHJcblx0XHRmdW5jdGlvbiB3ZWJTb2NrZXRIb3N0KCkge1xyXG5cdFx0XHRpZiAod2luZG93LmxvY2F0aW9uLmhvc3QgPT09IFwiaHR0cHM6XCIpe1xyXG5cdFx0XHRcdHJldHVybiBcIndzczovL1wiICsgd2luZG93LmxvY2F0aW9uLmhvc3Q7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIFwid3M6Ly9cIiArIHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQoZnVuY3Rpb24gY29ubmVjdCgpIHtcclxuXHRcdFx0dmFyIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHdlYlNvY2tldEhvc3QoKSk7XHJcblx0XHRcdGNvbm5lY3Rpb24ub25jbG9zZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdXZWJTb2NrZXQgY2xvc2VkLiBSZWNvbm5lY3RpbmcuLi4nKTtcclxuXHRcdFx0XHQkdGltZW91dChjb25uZWN0LCAxMCAqIDEwMDApO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHR2YXIgcGF5bG9hZCA9IEpTT04ucGFyc2UoZS5kYXRhKTtcclxuXHRcdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ3dzOicgKyBwYXlsb2FkLnRvcGljLCBwYXlsb2FkLmRhdGEpO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSkoKTtcclxuXHR9KTsiXX0=
